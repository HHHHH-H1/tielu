# 川渝地区轨道交通客流数据分析与展示系统

## 项目概述

本项目是一个基于C++的轨道交通客流数据分析与展示系统，面向川渝地区轨道交通网络，采用面向对象的程序设计方法开发，提供客流数据管理、分析和可视化功能。

## 系统架构

### 核心类设计

1. **Station（站点类）**
   - 管理站点基本信息（ID、名称、城市、坐标、类型等）
   - 支持站点属性查询和修改

2. **Route（线路类）**
   - 管理线路信息和站点序列
   - 支持站点添加/删除、距离计算等功能

3. **Train（列车类）**
   - 管理列车信息和时刻表
   - 支持载客率计算、运行状态管理

4. **PassengerFlow（客流管理类）**
   - 管理客流记录数据
   - 提供统计分析、预测等功能

5. **DataAnalyzer（数据分析类）**
   - 提供多维度数据分析功能
   - 生成图表数据和分析报告

6. **FileManager（文件管理类）**
   - 负责数据的文件存储和读取
   - 支持CSV格式数据导入导出

## 功能特性

### 1. 基础数据管理
- ✅ 站点信息管理（增删改查）
- ✅ 线路信息管理（站点顺序展示）
- ✅ 列车信息管理（时刻表、载客量）
- ✅ 客流记录管理（上下客数据）

### 2. 数据分析功能
- ✅ 站点客流统计和排行
- ✅ 川渝双向流量对比分析
- ✅ 列车载客率分析
- ✅ 时段客流分布分析
- ✅ 客流预测（基于历史数据）

### 3. 数据可视化
- 🔲 客流热力图
- 🔲 列车运行模拟
- 🔲 趋势对比图表
- 🔲 站点流量柱状图

### 4. 报告生成
- ✅ 日客流报告
- ✅ 站点排行报告
- ✅ 载客率分析报告
- ✅ 流量预测报告

### 5. 数据存储
- ✅ CSV格式数据导入导出
- ✅ 配置文件管理
- ✅ 数据备份和恢复

## 技术栈

- **编程语言**: C++17
- **构建工具**: CMake / Makefile
- **GUI框架**: 支持Qt6（可选）
- **数据格式**: CSV文件存储
- **开发环境**: 跨平台支持

## 编译和运行

### 方法1: 使用Makefile（推荐）

```bash
# 编译项目
make

# 运行程序
make run

# 清理编译文件
make clean
```

### 方法2: 使用CMake

```bash
# 创建构建目录
mkdir build
cd build

# 配置项目
cmake ..

# 编译
make

# 运行
./railway_system
```

### 方法3: 手动编译

```bash
g++ -std=c++17 -Wall -Wextra -g *.cpp -o railway_system
./railway_system
```

## 系统使用说明

### 主要功能模块

1. **站点管理**: 查看所有站点信息，包括位置、类型、站台数等
2. **线路管理**: 查看线路信息和沿线站点顺序
3. **列车管理**: 查看列车时刻表和运行状态
4. **客流统计**: 查看各站点客流统计数据
5. **流量分析**: 分析川渝双向客流差异
6. **载客率分析**: 分析各列车的载客情况
7. **客流预测**: 基于历史数据预测未来客流
8. **报告生成**: 生成各类分析报告

### 示例数据

系统内置了川渝地区主要站点的示例数据：
- **重庆北站** (CQ001): 起始站，8个站台
- **重庆西站** (CQ002): 中间站，6个站台  
- **成都东站** (CD001): 终点站，12个站台
- **成都南站** (CD002): 中间站，4个站台

### 数据文件格式

#### 站点数据 (stations.csv)
```csv
StationID,StationName,CityName,Longitude,Latitude,StationType,PlatformCount,IsTransferStation
CQ001,重庆北站,重庆,106.5516,29.8132,起始站,8,1
```

#### 客流记录 (flow_records.csv)
```csv
RecordID,StationID,StationName,Date,Hour,BoardingCount,AlightingCount,TrainID,Direction
F001,CD001,成都东站,2024-12-15,8,350,120,G8501,川->渝
```

### 数据集编码

部分原始CSV文件以`GB18030`编码存储，直接打开会出现乱码。可使用仓库提供的脚本
`tools/convert_encoding.py`将其统一转换为UTF‑8：

```bash
# 将 data 目录下的 CSV 转换到 data_utf8 目录
python3 tools/convert_encoding.py data data_utf8
```

转换后生成的`data_utf8`目录可供程序或其他工具读取。

## 项目结构

```
tielu/
├── Station.h/.cpp          # 站点类
├── Route.h/.cpp            # 线路类  
├── Train.h/.cpp            # 列车类
├── PassengerFlow.h/.cpp    # 客流管理类
├── DataAnalyzer.h/.cpp     # 数据分析类
├── FileManager.h/.cpp      # 文件管理类
├── main.cpp                # 主程序
├── CMakeLists.txt          # CMake配置
├── Makefile                # Make配置
└── README.md               # 项目说明
```

## 扩展功能

### 已规划功能
- Qt图形界面版本
- 地图显示功能
- 实时数据更新
- 更复杂的预测算法
- Web版本界面

### 可视化展示
- 使用Qt Charts实现图表显示
- 支持柱状图、折线图、饼图等
- 交互式数据探索

## 开发团队

- **项目负责人**: [学生姓名]
- **开发成员**: [团队成员]
- **指导教师**: [教师姓名]

## 版本历史

- **v1.0** (2024-12-15): 初始版本，基础功能实现
  - 核心类设计完成
  - 控制台版本实现
  - 基础数据分析功能

## 贡献指南

1. Fork项目
2. 创建功能分支
3. 提交代码
4. 发起Pull Request

## 许可证

本项目为教学项目，仅供学习使用。

## 联系方式

如有问题，请联系开发团队或提交Issue。 