# 川渝轨道交通系统 - Qt GUI版本编译指南

## 🎯 系统要求

### 必需软件
1. **Qt6 开发环境**
   - Qt6.2 或更高版本
   - Qt Creator IDE（推荐）
   - 包含 Qt Widgets 模块

2. **C++ 编译器**
   - Windows: MinGW 或 MSVC
   - 支持 C++17 标准

3. **构建工具**
   - CMake 3.10+ 或 qmake

## 📦 安装Qt6

### Windows安装
1. 访问 [Qt官网](https://www.qt.io/download)
2. 下载 Qt6 开源版本
3. 安装时选择：
   - Qt 6.x.x
   - Qt Creator
   - MinGW 编译器
   - Qt Widgets 模块

## 🔧 编译方法

### 方法1：使用批处理脚本（推荐）

```bash
# 运行自动构建脚本
.\build_gui.bat
```

脚本会自动：
- 检测Qt环境
- 生成项目文件
- 编译GUI版本
- 启动程序

### 方法2：使用Qt Creator

1. 打开Qt Creator
2. 选择 "打开项目"
3. 导航到项目目录
4. 选择 `RailwaySystem.pro` 文件（如果没有，运行脚本生成）
5. 配置构建套件
6. 点击 "构建" 按钮

### 方法3：手动命令行编译

```bash
# 1. 确保Qt环境变量已设置
echo %QTDIR%

# 2. 生成项目文件
qmake -project "QT += widgets" "CONFIG += c++17"

# 3. 生成Makefile
qmake

# 4. 编译
mingw32-make
# 或
nmake  # 如果使用MSVC
```

## 🏗️ 项目结构

```
tielu/
├── 核心模块
│   ├── Station.h/cpp          # 站点管理
│   ├── Route.h/cpp            # 线路管理  
│   ├── Train.h/cpp            # 列车管理
│   ├── PassengerFlow.h/cpp    # 客流管理
│   ├── DataAnalyzer.h/cpp     # 数据分析
│   └── FileManager.h/cpp      # 文件管理
├── 界面程序
│   ├── main_gui.cpp           # Qt GUI主程序
│   ├── main.cpp               # 控制台版本
│   └── build_gui.bat          # 构建脚本
├── 构建配置
│   ├── CMakeLists.txt         # CMake配置
│   └── RailwaySystem.pro      # qmake项目文件
└── 数据文件
    └── data/                  # CSV数据文件
```

## 🖥️ GUI功能特性

### 1. 数据管理界面
- **站点信息展示**：树形结构显示所有站点
- **线路信息管理**：可视化线路和站点关系
- **列车信息查看**：表格形式展示列车详情
- **实时状态显示**：系统运行状态和统计信息

### 2. 数据分析功能
- **站点客流排行**：自动分析各站点客流量排名
- **川渝双向流量对比**：可视化双向客流对比分析  
- **列车载客率分析**：实时监控列车运行效率
- **智能分析报告**：自动生成分析结论和建议

### 3. 可视化图表
- **客流趋势图**：7天客流变化趋势
- **站点排行图**：客流量排行可视化
- **双向流量对比图**：川渝方向流量对比
- **文本图表显示**：ASCII字符图表（无需Qt Charts）

### 4. 系统管理
- **数据导入导出**：支持CSV格式数据
- **自动数据初始化**：内置示例数据
- **实时刷新**：动态更新显示内容
- **状态监控**：系统运行状态提示

## 🚀 运行程序

### 启动GUI版本

```bash
# 方法1：直接运行
.\bin\RailwaySystemGUI.exe

# 方法2：通过脚本启动
.\build_gui.bat

# 方法3：在Qt Creator中运行
# 点击绿色运行按钮
```

### 启动控制台版本

```bash
# 编译控制台版本
g++ -std=c++17 Station.cpp Route.cpp Train.cpp PassengerFlow.cpp DataAnalyzer.cpp FileManager.cpp main.cpp -o railway_system.exe

# 运行控制台版本
.\railway_system.exe
```

## 🎨 界面预览

### 主界面布局
```
┌─────────────────────────────────────────────────────────────┐
│ 川渝地区轨道交通客流数据分析与展示系统 v1.0                 │
├─────────────────────────────────────────────────────────────┤
│ 文件(F)  帮助(H)                                            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────┬──────────────┬──────────────────────┐      │
│  │ 数据管理    │ 数据分析     │ 可视化图表           │      │
│  └─────────────┴──────────────┴──────────────────────┘      │
│                                                             │
│  数据管理界面:                                              │
│  ┌─────────────────┬─────────────────────────────────┐      │
│  │ 站点信息        │ 列车信息                        │      │
│  │ ├─重庆北站      │ ┌─────┬──────┬────────┬──────┐ │      │
│  │ ├─重庆西站      │ │列车号│ 类型 │ 线路   │载客量│ │      │
│  │ ├─成都东站      │ ├─────┼──────┼────────┼──────┤ │      │
│  │ └─成都南站      │ │G8501 │  G   │成渝高铁│ 1200 │ │      │
│  │                 │ │G8502 │  G   │成渝高铁│ 1200 │ │      │
│  │ 线路信息        │ └─────┴──────┴────────┴──────┘ │      │
│  │ └─成渝高铁      │                                 │      │
│  └─────────────────┴─────────────────────────────────┘      │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│ 系统就绪                                     记录数: 6     │
└─────────────────────────────────────────────────────────────┘
```

## 🔧 故障排除

### 常见问题

1. **找不到Qt环境**
   ```bash
   错误: 未找到Qt开发环境
   解决: 确保Qt bin目录已添加到PATH环境变量
   ```

2. **编译失败**
   ```bash
   错误: 编译失败
   解决: 检查C++编译器安装和配置
   ```

3. **程序无法启动**
   ```bash
   错误: 找不到Qt6Core.dll
   解决: 复制Qt运行时库到程序目录
   ```

### 环境变量设置

```bash
# 设置Qt环境变量（示例）
set QTDIR=C:\Qt\6.5.0\mingw_64
set PATH=%QTDIR%\bin;%PATH%
```

## 📋 功能对比

| 功能模块 | 控制台版本 | GUI版本 |
|----------|------------|---------|
| 数据管理 | ✅ 文本显示 | ✅ 可视化界面 |
| 客流分析 | ✅ 文本报告 | ✅ 图形化分析 |
| 数据可视化 | ❌ 不支持 | ✅ 文本图表 |
| 用户体验 | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| 系统资源 | 低 | 中等 |
| 部署复杂度 | 简单 | 需要Qt运行时 |

## 🎯 未来扩展

### 计划功能
- **真实图表支持**：集成Qt Charts模块
- **数据库集成**：支持MySQL/SQLite
- **网络功能**：实时数据同步
- **地图集成**：站点地理位置显示
- **报表导出**：PDF/Excel格式报告

### 技术升级
- **Qt6 Chart**：专业图表库
- **QML界面**：现代化UI设计
- **多语言支持**：国际化界面
- **主题定制**：深色/浅色主题

## 📞 技术支持

如果遇到问题，请检查：
1. Qt版本兼容性
2. 编译器配置
3. 环境变量设置
4. 项目文件完整性

---

**注意**: GUI版本需要Qt6运行时环境，如果目标机器没有安装Qt，需要打包相关库文件。 